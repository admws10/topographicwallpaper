<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>3D Topographic Live Wallpaper</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; width: 100vw; height: 100vh; }
</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script>
  let scene, camera, renderer, plane;
  let clock = new THREE.Clock();

  init();
  animate();

  function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x0a0a1a);

    camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 30, 40);
    camera.lookAt(0, 0, 0);

    const ambientLight = new THREE.AmbientLight(0x404040);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
    directionalLight.position.set(10, 20, 10);
    scene.add(directionalLight);

    const geometry = new THREE.PlaneGeometry(40, 40, 80, 80);
    geometry.rotateX(-Math.PI / 2);

    const material = new THREE.MeshStandardMaterial({
      color: 0x669966,
      wireframe: false,
      flatShading: true,
    });

    plane = new THREE.Mesh(geometry, material);
    scene.add(plane);

    renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    window.addEventListener('resize', onWindowResize, false);
  }

  function onWindowResize() {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  }

  function animate() {
    requestAnimationFrame(animate);

    let time = clock.getElapsedTime();

    // Deformuj vrcholy podle sinů + cosů - topografická animace
    plane.geometry.vertices.forEach(v => {
      v.y = 2 * Math.sin(v.x * 0.5 + time) * Math.cos(v.z * 0.5 + time);
    });
    plane.geometry.verticesNeedUpdate = true;
    plane.geometry.computeVertexNormals();

    renderer.render(scene, camera);
  }
</script>
</body>
</html>
