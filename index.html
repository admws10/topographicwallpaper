<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Topographic Live Wallpaper</title>
<style>
  html, body {
    margin: 0; padding: 0; overflow: hidden; height: 100%;
    background: #000;
  }
  canvas {
    display: block; width: 100vw; height: 100vh;
  }
</style>
</head>
<body>
<canvas id="glsl-canvas"></canvas>

<script src="https://cdn.jsdelivr.net/gh/patriciogonzalezvivo/glslCanvas@latest/dist/GlslCanvas.min.js"></script>
<script>
  const canvas = document.getElementById('glsl-canvas');
  const sandbox = new GlslCanvas(canvas);

  sandbox.load(`
    #ifdef GL_ES
    precision mediump float;
    #endif

    uniform float u_time;
    uniform vec2 u_resolution;

    float heightMap(vec2 pos) {
        float h = 0.0;
        h += 0.5 * sin(3.0 * pos.x + u_time);
        h += 0.3 * sin(5.0 * pos.y + u_time * 1.5);
        h += 0.2 * sin(7.0 * (pos.x + pos.y) + u_time * 0.7);
        return h;
    }

    vec3 getNormal(vec2 pos) {
        float eps = 0.001;
        float h = heightMap(pos);
        float hx = heightMap(pos + vec2(eps, 0.0));
        float hy = heightMap(pos + vec2(0.0, eps));
        vec3 n = normalize(vec3(hx - h, hy - h, eps));
        return n;
    }

    void main() {
        vec2 uv = gl_FragCoord.xy / u_resolution.xy;
        uv = uv * 4.0 - 2.0;
        
        float h = heightMap(uv);
        vec3 normal = getNormal(uv);
        
        vec3 lightDir = normalize(vec3(0.5, 1.0, 0.7));
        float diff = max(dot(normal, lightDir), 0.0);
        
        vec3 col = mix(vec3(0.1, 0.3, 0.1), vec3(0.8, 0.8, 0.6), (h + 1.0) / 2.0);
        
        col *= diff * 1.2 + 0.3;
        
        gl_FragColor = vec4(col, 1.0);
    }
  `);
</script>
</body>
</html>
